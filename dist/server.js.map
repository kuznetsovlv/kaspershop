{"version":3,"file":"server.js","sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 4d50bcf434ce70c51386","webpack:///./index.js","webpack:////home/leonid/Documents/projects/kasperShop/~/httpapijs/dist/index.js","webpack:///./onStart.js","webpack:///./onGet.js","webpack:////home/leonid/Documents/projects/kasperShop/~/fiojs/dist/index.js","webpack:///./utils/index.js","webpack:///./utils/sendError.js","webpack:///./utils/sendFile.js","webpack:///./utils/sendData.js","webpack:///./utils/getPostData.js","webpack:////home/leonid/Documents/projects/kasperShop/~/promise/index.js","webpack:////home/leonid/Documents/projects/kasperShop/~/promise/lib/index.js","webpack:////home/leonid/Documents/projects/kasperShop/~/promise/lib/core.js","webpack:////home/leonid/Documents/projects/kasperShop/~/asap/raw.js","webpack:////home/leonid/Documents/projects/kasperShop/~/promise/lib/done.js","webpack:////home/leonid/Documents/projects/kasperShop/~/promise/lib/finally.js","webpack:////home/leonid/Documents/projects/kasperShop/~/promise/lib/es6-extensions.js","webpack:////home/leonid/Documents/projects/kasperShop/~/promise/lib/node-extensions.js","webpack:////home/leonid/Documents/projects/kasperShop/~/asap/asap.js","webpack:////home/leonid/Documents/projects/kasperShop/~/promise/lib/synchronous.js","webpack:///./onPost.js","webpack:///./services/index.js","webpack:///./services/data.js","webpack:///./constants/index.js","webpack:///./constants/encoding.js","webpack:///./utils/cathegoryUtils.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"http\"), require(\"url\"), require(\"path\"), require(\"fs\"), require(\"domain\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"http\", \"url\", \"path\", \"fs\", \"domain\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"kasperskyShop\"] = factory(require(\"http\"), require(\"url\"), require(\"path\"), require(\"fs\"), require(\"domain\"));\n\telse\n\t\troot[\"kasperskyShop\"] = factory(root[\"http\"], root[\"url\"], root[\"path\"], root[\"fs\"], root[\"domain\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_9__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4d50bcf434ce70c51386","'use strict';\n\nvar _httpapijs = require('httpapijs');\n\nvar _httpapijs2 = _interopRequireDefault(_httpapijs);\n\nvar _onStart = require('./onStart');\n\nvar _onStart2 = _interopRequireDefault(_onStart);\n\nvar _onGet = require('./onGet');\n\nvar _onGet2 = _interopRequireDefault(_onGet);\n\nvar _onPost = require('./onPost');\n\nvar _onPost2 = _interopRequireDefault(_onPost);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar server = new _httpapijs2.default(8084, __dirname);\n\nserver.on('start', _onStart2.default);\nserver.on('get', _onGet2.default);\nserver.on('post', _onPost2.default);\n\nserver.up();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./index.js\n// module id = 0\n// module chunks = 0","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t(require(\"http\")):\"function\"==typeof define&&define.amd?define([\"http\"],t):\"object\"==typeof exports?exports.httpapijs=t(require(\"http\")):e.httpapijs=t(e.http)}(this,function(e){return function(e){function t(r){if(o[r])return o[r].exports;var n=o[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var o={};return t.m=e,t.c=o,t.p=\"\",t(0)}([function(e,t,o){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.getStatusText=t.getContentType=void 0;var n=o(1),i=r(n),u=o(4),a=r(u),c=o(7),s=r(c);t.default=i.default,t.getContentType=a.default,t.getStatusText=s.default},function(e,t,o){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=o(2),i=r(n);t.default=i.default},function(e,t,o){(function(e){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function n(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function i(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){var o=e.method,r=o.toLowerCase();Object.prototype.hasOwnProperty.call(l,r)&&l[r](e,t)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),c=function e(t,o,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,o);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,r)}if(\"value\"in n)return n.value;var u=n.get;if(void 0!==u)return u.call(r)},s=o(3),l={},d=function(t){function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:80,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;r(this,o);var a=n(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return a.port=parseFloat(t),a.root=i,a.on=a.on.bind(a),a.up=a.up.bind(a),a.on(\"request\",u.bind(a)),a}return i(o,t),a(o,[{key:\"on\",value:function(e,t){switch(e){case\"start\":this.onStart=t.bind(this);break;case\"connection\":case\"request\":c(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),\"on\",this).call(this,e,t);break;default:l[e]=t}return this}},{key:\"up\",value:function(){return c(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),\"listen\",this).call(this,this.port),this.emit(\"fired\"),\"function\"==typeof this.onStart&&this.onStart(),this}}]),o}(s.Server);t.default=d}).call(t,\"/\")},function(e,t){e.exports=require(\"http\")},function(e,t,o){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=o(5),i=r(n);t.default=i.default},function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=o(6),n={\".txt\":\"text/plain; \"+r.charsetCode,\".htm\":\"text/html; \"+r.charsetCode,\".html\":\"text/html; \"+r.charsetCode,\".js\":\"text/javascript; \"+r.charsetCode,\".css\":\"text/css; \"+r.charsetCode,\".bin\":\"application/binary\",\".json\":\"application/json; \"+r.charsetCode,\".jpeg\":\"image/jpeg\",\".jpg\":\"image/jpeg\",\".png\":\"image/png\",\".ico\":\"image/x-icon\",\".mp4\":\"video/mp4\",\".mp3\":\"audio/mp3\",\".gif\":\"image/gif\"};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\".html\";return/^\\..*/.test(e)||(e=\".\"+e),n[e]}},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.charsetCode=\"charset=utf-8\"},function(e,t,o){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=o(8),i=r(n);t.default=i.default},function(e,t,o){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=o(9),i=r(n);t.default=function(e){return i.default[e]}},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default={100:\"Continue\",101:\"Switching Protocols\",102:\"Processing\",200:\"OK\",201:\"Created\",202:\"Accepted\",203:\"Non-Authoritative Information\",204:\"No Content\",205:\"Reset Content\",206:\"Partial Content\",207:\"Multi-Status\",208:\"Already Reported\",226:\"IM Used\",300:\"Multiple Choices\",301:\"Moved Permanently\",302:\"Found\",303:\"See Other\",304:\"Not Modified\",305:\"Use Proxy\",306:\"Switch Proxy\",307:\"Temporary Redirect\",308:\"Permanent Redirect\",400:\"Bad Request\",401:\"Unauthorized\",402:\"Payment Required\",403:\"Forbidden\",404:\"Not Found\",405:\"Method Not Allowed\",406:\"Not Acceptable\",407:\"Proxy Authentication Required\",408:\"Request Timeout\",409:\"Conflict\",410:\"Gone\",411:\"Length Required\",500:\"Internal Server Error\",501:\"Not Implemented\",502:\"Bad Gateway\",503:\"Service Unavailable\",504:\"Gateway Timeout\",505:\"HTTP Version Not Supported\",506:\"Variant Also Negotiates\",507:\"Insufficient Storage\",508:\"Loop Detected\",509:\"Bandwidth Limit Exceeded\",510:\"Not Extended\",511:\"Network Authentication Required\",520:\"Unknown Error\",522:\"Origin Connection Time-out\",598:\"Network read timeout error\",599:\"Network connect timeout error\"}}])});\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/leonid/Documents/projects/kasperShop/~/httpapijs/dist/index.js\n// module id = 1\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar WAITINGS = [500, 1000, 1000, 1000, 2000, 3000, 0];\n\nvar i = 0;\n\nexports.default = function () {\n  var started = new Date();\n\n  console.log('Hello!');\n\n  setTimeout(function () {\n    console.log('I\\'m simple nonamed webserver.');\n\n    setTimeout(function () {\n      console.log('I\\'m not very smart and the only protocol which I can is HTTP. =(');\n\n      setTimeout(function () {\n        console.log('But I belong for this task.');\n\n        setTimeout(function () {\n          console.log('And of course I\\'ll do my best for you.');\n\n          setTimeout(function () {\n            console.log('But if you need something else you are able to improve me as you wish.');\n\n            setTimeout(function () {\n              console.log('Oh! In despite of my monologue and slopping over I have got started. And I\\'m waiting for your responses about ' + (new Date().getTime() - started.getTime()) / 1000 + ' seconds.');\n\n              setTimeout(function () {\n                return console.log('Let\\'s work!');\n              }, WAITINGS[i++]);\n            }, WAITINGS[i++]);\n          }, WAITINGS[i++]);\n        }, WAITINGS[i++]);\n      }, WAITINGS[i++]);\n    }, WAITINGS[i++]);\n  }, WAITINGS[i++]);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./onStart.js\n// module id = 3\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _url = require('url');\n\nvar _path = require('path');\n\nvar _fiojs = require('fiojs');\n\nvar _utils = require('./utils');\n\nexports.default = function (request, response) {\n  var server = request.server || {};\n  var url = request.url;\n  var _server$root = server.root,\n      root = _server$root === undefined ? __dirname : _server$root;\n\n\n  var data = (0, _url.parse)(url, true);\n  // const query = data.query || {};\n  var pathname = data.pathname;\n\n\n  (0, _fiojs.getFileInfo)((0, _path.join)(root, pathname)).then(function (data) {\n    var exists = data.exists,\n        fileType = data.fileType,\n        path = data.path,\n        name = data.name;\n\n\n    if (!exists) {\n      (0, _utils.sendError)(response, 404, name + ' not found.');\n    } else {\n      switch (fileType) {\n        case 'regular file':\n          return data;\n        case 'directory':\n          return (0, _fiojs.getFileInfo)((0, _path.join)(path, 'index.html')).then(function (data) {\n            var exists = data.exists,\n                fileType = data.fileType;\n\n            if (!exists || fileType !== 'regular file') {\n              (0, _utils.sendError)(response, 404);\n            } else {\n              return data;\n            }\n          });\n        default:\n          (0, _utils.sendError)(response, 403);\n      }\n    }\n  }).then(function (data) {\n    return (0, _utils.sendFile)(response, data);\n  }, function (error) {\n    return (0, _utils.sendError)(response, 500, error.message || error);\n  });\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./onGet.js\n// module id = 4\n// module chunks = 0","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e(require(\"fs\"),require(\"domain\"),require(\"path\")):\"function\"==typeof define&&define.amd?define([\"fs\",\"domain\",\"path\"],e):\"object\"==typeof exports?exports.fiojs=e(require(\"fs\"),require(\"domain\"),require(\"path\")):t.fiojs=e(t.fs,t.domain,t.path)}(this,function(t,e,n){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p=\"\",e(0)}([function(t,e,n){\"use strict\";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.getFileInfo=e.writeFile=e.readFile=void 0;var o=n(1),i=r(o),u=n(15),f=r(u),s=n(17),c=r(s);e.readFile=i.default,e.writeFile=f.default,e.getFileInfo=c.default},function(t,e,n){\"use strict\";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var o=n(2),i=r(o);e.default=i.default},function(t,e,n){\"use strict\";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(3),i=n(4),u=r(i);e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1];return new u.default(function(n,r){var i=function(t,e){t?r(t):n(e)};\"string\"==typeof e?(0,o.readFile)(t,e,i):(0,o.readFile)(t,i)})}},function(t,e){t.exports=require(\"fs\")},function(t,e,n){\"use strict\";t.exports=n(5)},function(t,e,n){\"use strict\";t.exports=n(6),n(9),n(10),n(11),n(12),n(14)},function(t,e,n){\"use strict\";function r(){}function o(t){try{return t.then}catch(t){return y=t,m}}function i(t,e){try{return t(e)}catch(t){return y=t,m}}function u(t,e,n){try{t(e,n)}catch(t){return y=t,m}}function f(t){if(\"object\"!=typeof this)throw new TypeError(\"Promises must be constructed via new\");if(\"function\"!=typeof t)throw new TypeError(\"Promise constructor's argument is not a function\");this._75=0,this._83=0,this._18=null,this._38=null,t!==r&&v(t,this)}function s(t,e,n){return new t.constructor(function(o,i){var u=new f(r);u.then(o,i),c(t,new h(e,n,u))})}function c(t,e){for(;3===t._83;)t=t._18;return f._47&&f._47(t),0===t._83?0===t._75?(t._75=1,void(t._38=e)):1===t._75?(t._75=2,void(t._38=[t._38,e])):void t._38.push(e):void a(t,e)}function a(t,e){_(function(){var n=1===t._83?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._83?l(e.promise,t._18):p(e.promise,t._18));var r=i(n,t._18);r===m?p(e.promise,y):l(e.promise,r)})}function l(t,e){if(e===t)return p(t,new TypeError(\"A promise cannot be resolved with itself.\"));if(e&&(\"object\"==typeof e||\"function\"==typeof e)){var n=o(e);if(n===m)return p(t,y);if(n===t.then&&e instanceof f)return t._83=3,t._18=e,void d(t);if(\"function\"==typeof n)return void v(n.bind(e),t)}t._83=1,t._18=e,d(t)}function p(t,e){t._83=2,t._18=e,f._71&&f._71(t,e),d(t)}function d(t){if(1===t._75&&(c(t,t._38),t._38=null),2===t._75){for(var e=0;e<t._38.length;e++)c(t,t._38[e]);t._38=null}}function h(t,e,n){this.onFulfilled=\"function\"==typeof t?t:null,this.onRejected=\"function\"==typeof e?e:null,this.promise=n}function v(t,e){var n=!1,r=u(t,function(t){n||(n=!0,l(e,t))},function(t){n||(n=!0,p(e,t))});n||r!==m||(n=!0,p(e,y))}var _=n(7),y=null,m={};t.exports=f,f._47=null,f._71=null,f._44=r,f.prototype.then=function(t,e){if(this.constructor!==f)return s(this,t,e);var n=new f(r);return c(this,new h(t,e,n)),n}},function(t,e,n){\"use strict\";function r(t){s.length||(i(),c=!0),s[s.length]=t}function o(){for(;a<s.length;){var t=a;if(a+=1,s[t].call(),a>l){for(var e=0,n=s.length-a;e<n;e++)s[e]=s[e+a];s.length-=a,a=0}}s.length=0,a=0,c=!1}function i(){var t=process.domain;t&&(u||(u=n(8)),u.active=process.domain=null),c&&f?setImmediate(o):process.nextTick(o),t&&(u.active=process.domain=t)}var u,f=\"function\"==typeof setImmediate;t.exports=r;var s=[],c=!1,a=0,l=1024;r.requestFlush=i},function(t,e){t.exports=require(\"domain\")},function(t,e,n){\"use strict\";var r=n(6);t.exports=r,r.prototype.done=function(t,e){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(t){setTimeout(function(){throw t},0)})}},function(t,e,n){\"use strict\";var r=n(6);t.exports=r,r.prototype.finally=function(t){return this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})})}},function(t,e,n){\"use strict\";function r(t){var e=new o(o._44);return e._83=1,e._18=t,e}var o=n(6);t.exports=o;var i=r(!0),u=r(!1),f=r(null),s=r(void 0),c=r(0),a=r(\"\");o.resolve=function(t){if(t instanceof o)return t;if(null===t)return f;if(void 0===t)return s;if(t===!0)return i;if(t===!1)return u;if(0===t)return c;if(\"\"===t)return a;if(\"object\"==typeof t||\"function\"==typeof t)try{var e=t.then;if(\"function\"==typeof e)return new o(e.bind(t))}catch(t){return new o(function(e,n){n(t)})}return r(t)},o.all=function(t){var e=Array.prototype.slice.call(t);return new o(function(t,n){function r(u,f){if(f&&(\"object\"==typeof f||\"function\"==typeof f)){if(f instanceof o&&f.then===o.prototype.then){for(;3===f._83;)f=f._18;return 1===f._83?r(u,f._18):(2===f._83&&n(f._18),void f.then(function(t){r(u,t)},n))}var s=f.then;if(\"function\"==typeof s){var c=new o(s.bind(f));return void c.then(function(t){r(u,t)},n)}}e[u]=f,0===--i&&t(e)}if(0===e.length)return t([]);for(var i=e.length,u=0;u<e.length;u++)r(u,e[u])})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){t.forEach(function(t){o.resolve(t).then(e,n)})})},o.prototype.catch=function(t){return this.then(null,t)}},function(t,e,n){\"use strict\";function r(t,e){for(var n=[],r=0;r<e;r++)n.push(\"a\"+r);var o=\"return function (\"+n.join(\",\")+\") {var self = this;return new Promise(function (rs, rj) {var res = fn.call(\"+[\"self\"].concat(n).concat([f]).join(\",\")+');if (res &&(typeof res === \"object\" || typeof res === \"function\") &&typeof res.then === \"function\") {rs(res);}});};';return Function([\"Promise\",\"fn\"],o)(i,t)}function o(t){for(var e=Math.max(t.length-1,3),n=[],r=0;r<e;r++)n.push(\"a\"+r);var o=\"return function (\"+n.join(\",\")+\") {var self = this;var args;var argLength = arguments.length;\"+(\"if (arguments.length > \"+e+\") {\")+\"args = new Array(arguments.length + 1);for (var i = 0; i < arguments.length; i++) {args[i] = arguments[i];}}return new Promise(function (rs, rj) {\"+(\"var cb = \"+f+\";\")+\"var res;switch (argLength) {\"+n.concat([\"extra\"]).map(function(t,e){return\"case \"+e+\":res = fn.call(\"+[\"self\"].concat(n.slice(0,e)).concat(\"cb\").join(\",\")+\");break;\"}).join(\"\")+'default:args[argLength] = cb;res = fn.apply(self, args);}if (res &&(typeof res === \"object\" || typeof res === \"function\") &&typeof res.then === \"function\") {rs(res);}});};';return Function([\"Promise\",\"fn\"],o)(i,t)}var i=n(6),u=n(13);t.exports=i,i.denodeify=function(t,e){return\"number\"==typeof e&&e!==1/0?r(t,e):o(t)};var f=\"function (err, res) {if (err) { rj(err); } else { rs(res); }}\";i.nodeify=function(t){return function(){var e=Array.prototype.slice.call(arguments),n=\"function\"==typeof e[e.length-1]?e.pop():null,r=this;try{return t.apply(this,arguments).nodeify(n,r)}catch(t){if(null===n||void 0===n)return new i(function(e,n){n(t)});u(function(){n.call(r,t)})}}},i.prototype.nodeify=function(t,e){return\"function\"!=typeof t?this:void this.then(function(n){u(function(){t.call(e,null,n)})},function(n){u(function(){t.call(e,n)})})}},function(t,e,n){\"use strict\";function r(t){var e;e=u.length?u.pop():new o,e.task=t,e.domain=process.domain,i(e)}function o(){this.task=null,this.domain=null}var i=n(7),u=[];t.exports=r,o.prototype.call=function(){this.domain&&this.domain.enter();var t=!0;try{this.task.call(),t=!1,this.domain&&this.domain.exit()}finally{t&&i.requestFlush(),this.task=null,this.domain=null,u.push(this)}}},function(t,e,n){\"use strict\";var r=n(6);t.exports=r,r.enableSynchronous=function(){r.prototype.isPending=function(){return 0==this.getState()},r.prototype.isFulfilled=function(){return 1==this.getState()},r.prototype.isRejected=function(){return 2==this.getState()},r.prototype.getValue=function(){if(3===this._83)return this._18.getValue();if(!this.isFulfilled())throw Error(\"Cannot get a value of an unfulfilled promise.\");return this._18},r.prototype.getReason=function(){if(3===this._83)return this._18.getReason();if(!this.isRejected())throw Error(\"Cannot get a rejection reason of a non-rejected promise.\");return this._18},r.prototype.getState=function(){return 3===this._83?this._18.getState():this._83===-1||this._83===-2?0:this._83}},r.disableSynchronous=function(){r.prototype.isPending=void 0,r.prototype.isFulfilled=void 0,r.prototype.isRejected=void 0,r.prototype.getValue=void 0,r.prototype.getReason=void 0,r.prototype.getState=void 0}},function(t,e,n){\"use strict\";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var o=n(16),i=r(o);e.default=i.default},function(t,e,n){\"use strict\";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(3),i=n(4),u=r(i);e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments[1],n=arguments[2];return new u.default(function(r,i){(0,o.writeFile)(t,e,n,function(t){t?i(t):r()})})}},function(t,e,n){\"use strict\";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var o=n(18),i=r(o);e.default=i.default},function(t,e,n){\"use strict\";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=n(3),u=n(19),f=n(4),s=r(f),c=function(t){return t.isDirectory()?\"directory\":t.isBlockDevice()?\"block device\":t.isCharacterDevice()?\"character device\":t.isSymbolicLink()?\"symbol link\":t.isFIFO()?\"fifo\":t.isSocket()?\"socket\":t.isFile()?\"regular file\":null};e.default=function(t){return new s.default(function(e,n){var r=(0,u.parse)(t),f=r.ext,s=f.replace(\".\",\"\"),a=(0,u.normalize)(t),l=a.split(u.sep);(0,i.lstat)(a,function(i,u){if(i){var f=i.code;\"ENOENT\"===f?e(o({},r,{exists:!1,path:t,normalized:a,normalizedArr:l,mime:s})):n(i)}else{var p=c(u)||\"\",d=!!p;e(o({},r,u,{path:t,normalized:a,normalizedArr:l,exists:d,fileType:p,mime:s}))}})}).then(function(e){return new s.default(function(n,r){(0,i.realpath)(t,function(t,i){if(t){var f=t.code;\"ENOENT\"===f?n(o({},e,{exists:!1})):r(t)}else{var s=i.split(u.sep),c=(0,u.relative)(process.cwd(),i);n(o({},e,{relative:c,absolute:i,absoluteArr:s}))}})})})}},function(t,e){t.exports=require(\"path\")}])});\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/leonid/Documents/projects/kasperShop/~/fiojs/dist/index.js\n// module id = 7\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.expandCathegories = exports.getPostData = exports.sendData = exports.sendFile = exports.sendError = undefined;\n\nvar _sendError = require('./sendError');\n\nvar _sendError2 = _interopRequireDefault(_sendError);\n\nvar _sendFile = require('./sendFile');\n\nvar _sendFile2 = _interopRequireDefault(_sendFile);\n\nvar _sendData = require('./sendData');\n\nvar _sendData2 = _interopRequireDefault(_sendData);\n\nvar _getPostData = require('./getPostData');\n\nvar _getPostData2 = _interopRequireDefault(_getPostData);\n\nvar _cathegoryUtils = require('./cathegoryUtils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.sendError = _sendError2.default;\nexports.sendFile = _sendFile2.default;\nexports.sendData = _sendData2.default;\nexports.getPostData = _getPostData2.default;\nexports.expandCathegories = _cathegoryUtils.expandCathegories;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./utils/index.js\n// module id = 10\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _httpapijs = require('httpapijs');\n\nexports.default = function (response, code, msg) {\n  response.statusCode = code;\n  response.statusMessage = msg || (0, _httpapijs.getStatusText)(code);\n  response.end();\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./utils/sendError.js\n// module id = 11\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _fiojs = require('fiojs');\n\nvar _httpapijs = require('httpapijs');\n\nvar _sendError = require('./sendError');\n\nvar _sendError2 = _interopRequireDefault(_sendError);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (response, fileData) {\n  var path = fileData.path,\n      ext = fileData.ext,\n      exists = fileData.exists,\n      size = fileData.size;\n\n\n  if (!exists) {\n    (0, _sendError2.default)(response, 500, 'Incorrect server code!');\n  } else {\n    (0, _fiojs.readFile)(path).then(function (data) {\n      response.statusCode = 200;\n      response.statusMessage = 'OK';\n      response.setHeader('Content-Type', (0, _httpapijs.getContentType)(ext));\n      response.setHeader('Content-Length', size);\n      response.write(data, function () {\n        return response.end();\n      });\n    }, function (error) {\n      return (0, _sendError2.default)(response, 500, error.message || error);\n    });\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./utils/sendFile.js\n// module id = 12\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _httpapijs = require('httpapijs');\n\nexports.default = function (response) {\n  var success = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  var strData = JSON.stringify(success ? { success: success, output: data } : { success: success, error: data });\n\n  response.statusCode = 200;\n  response.statusMessage = 'OK';\n  response.setHeader('Content-Type', (0, _httpapijs.getContentType)('json'));\n  response.setHeader('Content-Length', strData.length);\n  response.write(strData, function () {\n    return response.end();\n  });\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./utils/sendData.js\n// module id = 13\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _url = require('url');\n\nvar _path = require('path');\n\nvar _promise = require('promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (request) {\n  return new _promise2.default(function (resolve, reject) {\n    var data = [];\n    request.on('data', function (chunk) {\n      data.push(chunk.toString());\n    });\n    request.on('end', function () {\n      try {\n        var postData = JSON.parse(data.join(''));\n        var server = request.server || {};\n        var url = request.url;\n        var _server$root = server.root,\n            root = _server$root === undefined ? __dirname : _server$root;\n\n        var _parse = (0, _url.parse)(url, true),\n            pathname = _parse.pathname;\n\n        var path = (0, _path.join)(root, pathname);\n        resolve(_extends({}, postData, { path: path }));\n      } catch (error) {\n        reject(error);\n      }\n    });\n  });\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./utils/getPostData.js\n// module id = 14\n// module chunks = 0","'use strict';\n\nmodule.exports = require('./lib')\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/leonid/Documents/projects/kasperShop/~/promise/index.js\n// module id = 15\n// module chunks = 0","'use strict';\n\nmodule.exports = require('./core.js');\nrequire('./done.js');\nrequire('./finally.js');\nrequire('./es6-extensions.js');\nrequire('./node-extensions.js');\nrequire('./synchronous.js');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/leonid/Documents/projects/kasperShop/~/promise/lib/index.js\n// module id = 16\n// module chunks = 0","'use strict';\n\nvar asap = require('asap/raw');\n\nfunction noop() {}\n\n// States:\n//\n// 0 - pending\n// 1 - fulfilled with _value\n// 2 - rejected with _value\n// 3 - adopted the state of another promise, _value\n//\n// once the state is no longer pending (0) it is immutable\n\n// All `_` prefixed properties will be reduced to `_{random number}`\n// at build time to obfuscate them and discourage their use.\n// We don't use symbols or Object.defineProperty to fully hide them\n// because the performance isn't good enough.\n\n\n// to avoid using try/catch inside critical functions, we\n// extract them to here.\nvar LAST_ERROR = null;\nvar IS_ERROR = {};\nfunction getThen(obj) {\n  try {\n    return obj.then;\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nfunction tryCallOne(fn, a) {\n  try {\n    return fn(a);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\nfunction tryCallTwo(fn, a, b) {\n  try {\n    fn(a, b);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nmodule.exports = Promise;\n\nfunction Promise(fn) {\n  if (typeof this !== 'object') {\n    throw new TypeError('Promises must be constructed via new');\n  }\n  if (typeof fn !== 'function') {\n    throw new TypeError('Promise constructor\\'s argument is not a function');\n  }\n  this._75 = 0;\n  this._83 = 0;\n  this._18 = null;\n  this._38 = null;\n  if (fn === noop) return;\n  doResolve(fn, this);\n}\nPromise._47 = null;\nPromise._71 = null;\nPromise._44 = noop;\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  if (this.constructor !== Promise) {\n    return safeThen(this, onFulfilled, onRejected);\n  }\n  var res = new Promise(noop);\n  handle(this, new Handler(onFulfilled, onRejected, res));\n  return res;\n};\n\nfunction safeThen(self, onFulfilled, onRejected) {\n  return new self.constructor(function (resolve, reject) {\n    var res = new Promise(noop);\n    res.then(resolve, reject);\n    handle(self, new Handler(onFulfilled, onRejected, res));\n  });\n}\nfunction handle(self, deferred) {\n  while (self._83 === 3) {\n    self = self._18;\n  }\n  if (Promise._47) {\n    Promise._47(self);\n  }\n  if (self._83 === 0) {\n    if (self._75 === 0) {\n      self._75 = 1;\n      self._38 = deferred;\n      return;\n    }\n    if (self._75 === 1) {\n      self._75 = 2;\n      self._38 = [self._38, deferred];\n      return;\n    }\n    self._38.push(deferred);\n    return;\n  }\n  handleResolved(self, deferred);\n}\n\nfunction handleResolved(self, deferred) {\n  asap(function() {\n    var cb = self._83 === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      if (self._83 === 1) {\n        resolve(deferred.promise, self._18);\n      } else {\n        reject(deferred.promise, self._18);\n      }\n      return;\n    }\n    var ret = tryCallOne(cb, self._18);\n    if (ret === IS_ERROR) {\n      reject(deferred.promise, LAST_ERROR);\n    } else {\n      resolve(deferred.promise, ret);\n    }\n  });\n}\nfunction resolve(self, newValue) {\n  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n  if (newValue === self) {\n    return reject(\n      self,\n      new TypeError('A promise cannot be resolved with itself.')\n    );\n  }\n  if (\n    newValue &&\n    (typeof newValue === 'object' || typeof newValue === 'function')\n  ) {\n    var then = getThen(newValue);\n    if (then === IS_ERROR) {\n      return reject(self, LAST_ERROR);\n    }\n    if (\n      then === self.then &&\n      newValue instanceof Promise\n    ) {\n      self._83 = 3;\n      self._18 = newValue;\n      finale(self);\n      return;\n    } else if (typeof then === 'function') {\n      doResolve(then.bind(newValue), self);\n      return;\n    }\n  }\n  self._83 = 1;\n  self._18 = newValue;\n  finale(self);\n}\n\nfunction reject(self, newValue) {\n  self._83 = 2;\n  self._18 = newValue;\n  if (Promise._71) {\n    Promise._71(self, newValue);\n  }\n  finale(self);\n}\nfunction finale(self) {\n  if (self._75 === 1) {\n    handle(self, self._38);\n    self._38 = null;\n  }\n  if (self._75 === 2) {\n    for (var i = 0; i < self._38.length; i++) {\n      handle(self, self._38[i]);\n    }\n    self._38 = null;\n  }\n}\n\nfunction Handler(onFulfilled, onRejected, promise){\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, promise) {\n  var done = false;\n  var res = tryCallTwo(fn, function (value) {\n    if (done) return;\n    done = true;\n    resolve(promise, value);\n  }, function (reason) {\n    if (done) return;\n    done = true;\n    reject(promise, reason);\n  });\n  if (!done && res === IS_ERROR) {\n    done = true;\n    reject(promise, LAST_ERROR);\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/leonid/Documents/projects/kasperShop/~/promise/lib/core.js\n// module id = 17\n// module chunks = 0","\"use strict\";\n\nvar domain; // The domain module is executed on demand\nvar hasSetImmediate = typeof setImmediate === \"function\";\n\n// Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including network IO events in Node.js.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\nmodule.exports = rawAsap;\nfunction rawAsap(task) {\n    if (!queue.length) {\n        requestFlush();\n        flushing = true;\n    }\n    // Avoids a function call\n    queue[queue.length] = task;\n}\n\nvar queue = [];\n// Once a flush has been requested, no further calls to `requestFlush` are\n// necessary until the next `flush` completes.\nvar flushing = false;\n// The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\nvar index = 0;\n// If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory excaustion, the task queue will periodically\n// truncate already-completed tasks.\nvar capacity = 1024;\n\n// The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\nfunction flush() {\n    while (index < queue.length) {\n        var currentIndex = index;\n        // Advance the index before calling the task. This ensures that we will\n        // begin flushing on the next task the task throws an error.\n        index = index + 1;\n        queue[currentIndex].call();\n        // Prevent leaking memory for long chains of recursive calls to `asap`.\n        // If we call `asap` within tasks scheduled by `asap`, the queue will\n        // grow, but to avoid an O(n) walk for every task we execute, we don't\n        // shift tasks off the queue after they have been executed.\n        // Instead, we periodically shift 1024 tasks off the queue.\n        if (index > capacity) {\n            // Manually shift all values starting at the index back to the\n            // beginning of the queue.\n            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n                queue[scan] = queue[scan + index];\n            }\n            queue.length -= index;\n            index = 0;\n        }\n    }\n    queue.length = 0;\n    index = 0;\n    flushing = false;\n}\n\nrawAsap.requestFlush = requestFlush;\nfunction requestFlush() {\n    // Ensure flushing is not bound to any domain.\n    // It is not sufficient to exit the domain, because domains exist on a stack.\n    // To execute code outside of any domain, the following dance is necessary.\n    var parentDomain = process.domain;\n    if (parentDomain) {\n        if (!domain) {\n            // Lazy execute the domain module.\n            // Only employed if the user elects to use domains.\n            domain = require(\"domain\");\n        }\n        domain.active = process.domain = null;\n    }\n\n    // `setImmediate` is slower that `process.nextTick`, but `process.nextTick`\n    // cannot handle recursion.\n    // `requestFlush` will only be called recursively from `asap.js`, to resume\n    // flushing after an error is thrown into a domain.\n    // Conveniently, `setImmediate` was introduced in the same version\n    // `process.nextTick` started throwing recursion errors.\n    if (flushing && hasSetImmediate) {\n        setImmediate(flush);\n    } else {\n        process.nextTick(flush);\n    }\n\n    if (parentDomain) {\n        domain.active = process.domain = parentDomain;\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/leonid/Documents/projects/kasperShop/~/asap/raw.js\n// module id = 18\n// module chunks = 0","'use strict';\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\nPromise.prototype.done = function (onFulfilled, onRejected) {\n  var self = arguments.length ? this.then.apply(this, arguments) : this;\n  self.then(null, function (err) {\n    setTimeout(function () {\n      throw err;\n    }, 0);\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/leonid/Documents/projects/kasperShop/~/promise/lib/done.js\n// module id = 19\n// module chunks = 0","'use strict';\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\nPromise.prototype['finally'] = function (f) {\n  return this.then(function (value) {\n    return Promise.resolve(f()).then(function () {\n      return value;\n    });\n  }, function (err) {\n    return Promise.resolve(f()).then(function () {\n      throw err;\n    });\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/leonid/Documents/projects/kasperShop/~/promise/lib/finally.js\n// module id = 20\n// module chunks = 0","'use strict';\n\n//This file contains the ES6 extensions to the core Promises/A+ API\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\n\n/* Static Functions */\n\nvar TRUE = valuePromise(true);\nvar FALSE = valuePromise(false);\nvar NULL = valuePromise(null);\nvar UNDEFINED = valuePromise(undefined);\nvar ZERO = valuePromise(0);\nvar EMPTYSTRING = valuePromise('');\n\nfunction valuePromise(value) {\n  var p = new Promise(Promise._44);\n  p._83 = 1;\n  p._18 = value;\n  return p;\n}\nPromise.resolve = function (value) {\n  if (value instanceof Promise) return value;\n\n  if (value === null) return NULL;\n  if (value === undefined) return UNDEFINED;\n  if (value === true) return TRUE;\n  if (value === false) return FALSE;\n  if (value === 0) return ZERO;\n  if (value === '') return EMPTYSTRING;\n\n  if (typeof value === 'object' || typeof value === 'function') {\n    try {\n      var then = value.then;\n      if (typeof then === 'function') {\n        return new Promise(then.bind(value));\n      }\n    } catch (ex) {\n      return new Promise(function (resolve, reject) {\n        reject(ex);\n      });\n    }\n  }\n  return valuePromise(value);\n};\n\nPromise.all = function (arr) {\n  var args = Array.prototype.slice.call(arr);\n\n  return new Promise(function (resolve, reject) {\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n    function res(i, val) {\n      if (val && (typeof val === 'object' || typeof val === 'function')) {\n        if (val instanceof Promise && val.then === Promise.prototype.then) {\n          while (val._83 === 3) {\n            val = val._18;\n          }\n          if (val._83 === 1) return res(i, val._18);\n          if (val._83 === 2) reject(val._18);\n          val.then(function (val) {\n            res(i, val);\n          }, reject);\n          return;\n        } else {\n          var then = val.then;\n          if (typeof then === 'function') {\n            var p = new Promise(then.bind(val));\n            p.then(function (val) {\n              res(i, val);\n            }, reject);\n            return;\n          }\n        }\n      }\n      args[i] = val;\n      if (--remaining === 0) {\n        resolve(args);\n      }\n    }\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.reject = function (value) {\n  return new Promise(function (resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function (values) {\n  return new Promise(function (resolve, reject) {\n    values.forEach(function(value){\n      Promise.resolve(value).then(resolve, reject);\n    });\n  });\n};\n\n/* Prototype Methods */\n\nPromise.prototype['catch'] = function (onRejected) {\n  return this.then(null, onRejected);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/leonid/Documents/projects/kasperShop/~/promise/lib/es6-extensions.js\n// module id = 21\n// module chunks = 0","'use strict';\n\n// This file contains then/promise specific extensions that are only useful\n// for node.js interop\n\nvar Promise = require('./core.js');\nvar asap = require('asap');\n\nmodule.exports = Promise;\n\n/* Static Functions */\n\nPromise.denodeify = function (fn, argumentCount) {\n  if (\n    typeof argumentCount === 'number' && argumentCount !== Infinity\n  ) {\n    return denodeifyWithCount(fn, argumentCount);\n  } else {\n    return denodeifyWithoutCount(fn);\n  }\n};\n\nvar callbackFn = (\n  'function (err, res) {' +\n  'if (err) { rj(err); } else { rs(res); }' +\n  '}'\n);\nfunction denodeifyWithCount(fn, argumentCount) {\n  var args = [];\n  for (var i = 0; i < argumentCount; i++) {\n    args.push('a' + i);\n  }\n  var body = [\n    'return function (' + args.join(',') + ') {',\n    'var self = this;',\n    'return new Promise(function (rs, rj) {',\n    'var res = fn.call(',\n    ['self'].concat(args).concat([callbackFn]).join(','),\n    ');',\n    'if (res &&',\n    '(typeof res === \"object\" || typeof res === \"function\") &&',\n    'typeof res.then === \"function\"',\n    ') {rs(res);}',\n    '});',\n    '};'\n  ].join('');\n  return Function(['Promise', 'fn'], body)(Promise, fn);\n}\nfunction denodeifyWithoutCount(fn) {\n  var fnLength = Math.max(fn.length - 1, 3);\n  var args = [];\n  for (var i = 0; i < fnLength; i++) {\n    args.push('a' + i);\n  }\n  var body = [\n    'return function (' + args.join(',') + ') {',\n    'var self = this;',\n    'var args;',\n    'var argLength = arguments.length;',\n    'if (arguments.length > ' + fnLength + ') {',\n    'args = new Array(arguments.length + 1);',\n    'for (var i = 0; i < arguments.length; i++) {',\n    'args[i] = arguments[i];',\n    '}',\n    '}',\n    'return new Promise(function (rs, rj) {',\n    'var cb = ' + callbackFn + ';',\n    'var res;',\n    'switch (argLength) {',\n    args.concat(['extra']).map(function (_, index) {\n      return (\n        'case ' + (index) + ':' +\n        'res = fn.call(' + ['self'].concat(args.slice(0, index)).concat('cb').join(',') + ');' +\n        'break;'\n      );\n    }).join(''),\n    'default:',\n    'args[argLength] = cb;',\n    'res = fn.apply(self, args);',\n    '}',\n    \n    'if (res &&',\n    '(typeof res === \"object\" || typeof res === \"function\") &&',\n    'typeof res.then === \"function\"',\n    ') {rs(res);}',\n    '});',\n    '};'\n  ].join('');\n\n  return Function(\n    ['Promise', 'fn'],\n    body\n  )(Promise, fn);\n}\n\nPromise.nodeify = function (fn) {\n  return function () {\n    var args = Array.prototype.slice.call(arguments);\n    var callback =\n      typeof args[args.length - 1] === 'function' ? args.pop() : null;\n    var ctx = this;\n    try {\n      return fn.apply(this, arguments).nodeify(callback, ctx);\n    } catch (ex) {\n      if (callback === null || typeof callback == 'undefined') {\n        return new Promise(function (resolve, reject) {\n          reject(ex);\n        });\n      } else {\n        asap(function () {\n          callback.call(ctx, ex);\n        })\n      }\n    }\n  }\n};\n\nPromise.prototype.nodeify = function (callback, ctx) {\n  if (typeof callback != 'function') return this;\n\n  this.then(function (value) {\n    asap(function () {\n      callback.call(ctx, null, value);\n    });\n  }, function (err) {\n    asap(function () {\n      callback.call(ctx, err);\n    });\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/leonid/Documents/projects/kasperShop/~/promise/lib/node-extensions.js\n// module id = 22\n// module chunks = 0","\"use strict\";\n\nvar rawAsap = require(\"./raw\");\nvar freeTasks = [];\n\n/**\n * Calls a task as soon as possible after returning, in its own event, with\n * priority over IO events. An exception thrown in a task can be handled by\n * `process.on(\"uncaughtException\") or `domain.on(\"error\")`, but will otherwise\n * crash the process. If the error is handled, all subsequent tasks will\n * resume.\n *\n * @param {{call}} task A callable object, typically a function that takes no\n * arguments.\n */\nmodule.exports = asap;\nfunction asap(task) {\n    var rawTask;\n    if (freeTasks.length) {\n        rawTask = freeTasks.pop();\n    } else {\n        rawTask = new RawTask();\n    }\n    rawTask.task = task;\n    rawTask.domain = process.domain;\n    rawAsap(rawTask);\n}\n\nfunction RawTask() {\n    this.task = null;\n    this.domain = null;\n}\n\nRawTask.prototype.call = function () {\n    if (this.domain) {\n        this.domain.enter();\n    }\n    var threw = true;\n    try {\n        this.task.call();\n        threw = false;\n        // If the task throws an exception (presumably) Node.js restores the\n        // domain stack for the next event.\n        if (this.domain) {\n            this.domain.exit();\n        }\n    } finally {\n        // We use try/finally and a threw flag to avoid messing up stack traces\n        // when we catch and release errors.\n        if (threw) {\n            // In Node.js, uncaught exceptions are considered fatal errors.\n            // Re-throw them to interrupt flushing!\n            // Ensure that flushing continues if an uncaught exception is\n            // suppressed listening process.on(\"uncaughtException\") or\n            // domain.on(\"error\").\n            rawAsap.requestFlush();\n        }\n        // If the task threw an error, we do not want to exit the domain here.\n        // Exiting the domain would prevent the domain from catching the error.\n        this.task = null;\n        this.domain = null;\n        freeTasks.push(this);\n    }\n};\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/leonid/Documents/projects/kasperShop/~/asap/asap.js\n// module id = 23\n// module chunks = 0","'use strict';\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\nPromise.enableSynchronous = function () {\n  Promise.prototype.isPending = function() {\n    return this.getState() == 0;\n  };\n\n  Promise.prototype.isFulfilled = function() {\n    return this.getState() == 1;\n  };\n\n  Promise.prototype.isRejected = function() {\n    return this.getState() == 2;\n  };\n\n  Promise.prototype.getValue = function () {\n    if (this._83 === 3) {\n      return this._18.getValue();\n    }\n\n    if (!this.isFulfilled()) {\n      throw new Error('Cannot get a value of an unfulfilled promise.');\n    }\n\n    return this._18;\n  };\n\n  Promise.prototype.getReason = function () {\n    if (this._83 === 3) {\n      return this._18.getReason();\n    }\n\n    if (!this.isRejected()) {\n      throw new Error('Cannot get a rejection reason of a non-rejected promise.');\n    }\n\n    return this._18;\n  };\n\n  Promise.prototype.getState = function () {\n    if (this._83 === 3) {\n      return this._18.getState();\n    }\n    if (this._83 === -1 || this._83 === -2) {\n      return 0;\n    }\n\n    return this._83;\n  };\n};\n\nPromise.disableSynchronous = function() {\n  Promise.prototype.isPending = undefined;\n  Promise.prototype.isFulfilled = undefined;\n  Promise.prototype.isRejected = undefined;\n  Promise.prototype.getValue = undefined;\n  Promise.prototype.getReason = undefined;\n  Promise.prototype.getState = undefined;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/leonid/Documents/projects/kasperShop/~/promise/lib/synchronous.js\n// module id = 24\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _utils = require('./utils');\n\nvar _services = require('./services');\n\nexports.default = function (request, response) {\n  (0, _utils.getPostData)(request).then(function (data) {\n    var path = data.path,\n        service = data.service,\n        command = data.command;\n\n    var params = data.params || params;\n  }, function (error) {\n    return (0, _utils.sendError)(response, 500, error.message || error);\n  });\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./onPost.js\n// module id = 25\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.data = undefined;\n\nvar _data = require('./data');\n\nvar _data2 = _interopRequireDefault(_data);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.data = _data2.default;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./services/index.js\n// module id = 26\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setCommand = exports.getCommand = undefined;\n\nvar _fiojs = require('fiojs');\n\nvar _promise = require('promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _constants = require('../constants');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar getCommand = exports.getCommand = 'read';\nvar setCommand = exports.setCommand = 'write';\n\nexports.default = function (path, command) {\n  var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return new _promise2.default(function (resolve, reject) {\n    switch (command) {\n      case getCommand:\n        (0, _fiojs.getFileInfo)(path).then(function (_ref) {\n          var exists = _ref.exists,\n              fileType = _ref.fileType,\n              absolute = _ref.absolute;\n\n          if (!exists) {\n            return '{}';\n          } else if (fileType !== 'regular file') {\n            throw 'Request on incorrect path.';\n          }\n\n          return (0, _fiojs.readFile)(absolute, _constants.ENCODING);\n        }).then(function (str) {\n          return resolve(JSON.parse(str));\n        }, function (error) {\n          return reject(error);\n        });\n        break;\n      case setCommand:\n        try {\n          data = JSON.stringify(data);\n          (0, _fiojs.writeFile)(path, data, _constants.ENCODING).then(function (data) {\n            return resolve('OK');\n          }, function (error) {\n            return reject('Can not save data ' + JSON.stringify(data) + '.');\n          });\n        } catch (error) {\n          reject(error);\n        }\n        break;\n      default:\n        reject('Unknown command \"' + command + '\" for data service.');\n    }\n  });\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./services/data.js\n// module id = 27\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ENCODING = undefined;\n\nvar _encoding = require('./encoding');\n\nexports.ENCODING = _encoding.ENCODING;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./constants/index.js\n// module id = 28\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar ENCODING = exports.ENCODING = 'utf8';\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./constants/encoding.js\n// module id = 29\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar ALL = -1;\nvar INIT = 1;\n\nvar expandCathegories = exports.expandCathegories = function expandCathegories() {\n  var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var cathegoryList = _defineProperty({}, ALL, '');\n\n  var cathegories = data.cathegories;\n\n\n  if (!Array.isArray(cathegories)) {\n    cathegories = [];\n  }\n\n  cathegories = cathegories.map(function (cathegory, index) {\n    var expandedIndex = INIT << index;\n    cathegoryList[expandedIndex] = cathegory;\n    return expandedIndex;\n  });\n\n  return _extends({}, data, { cathegories: cathegories, cathegoryList: cathegoryList });\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./utils/cathegoryUtils.js\n// module id = 30\n// module chunks = 0"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AC1BA;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AC3DA;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AC1CA;AACA;AACA;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACpNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACpGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;","sourceRoot":""}